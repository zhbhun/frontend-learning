/*
Copyright (c) 2019 Daybrush
name: @scena/guides
license: MIT
author: Daybrush
repository: git+https://github.com/daybrush/guides.git
version: 0.18.1
*/
!function(t,n){"object"==typeof exports&&"undefined"!=typeof module?module.exports=n():"function"==typeof define&&define.amd?define(n):(t=t||self).Guides=n()}(this,function(){"use strict";var r=function(t,n){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var e in n)n.hasOwnProperty(e)&&(t[e]=n[e])})(t,n)};function o(t,n){function e(){this.constructor=t}r(t,n),t.prototype=null===n?Object.create(n):(e.prototype=n.prototype,new e)}var s=function(){return(s=Object.assign||function(t){for(var n,e=1,r=arguments.length;e<r;e++)for(var i in n=arguments[e])Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i]);return t}).apply(this,arguments)};function p(n,e){return function(t){t&&(n[e]=t)}}function e(e,r){return function(t){var n=t.prototype;e.forEach(function(t){r(n,t)})}}var y=function(){function t(){this.keys=[],this.values=[]}var n=t.prototype;return n.get=function(t){return this.values[this.keys.indexOf(t)]},n.set=function(t,n){var e=this.keys,r=this.values,i=e.indexOf(t),o=-1===i?e.length:i;e[o]=t,r[o]=n},t}(),b=function(){function t(){this.object={}}var n=t.prototype;return n.get=function(t){return this.object[t]},n.set=function(t,n){this.object[t]=n},t}(),_="function"==typeof Map,i=function(){function t(){}var n=t.prototype;return n.connect=function(t,n){this.prev=t,this.next=n,t&&(t.next=this),n&&(n.prev=this)},n.disconnect=function(){var t=this.prev,n=this.next;t&&(t.next=n),n&&(n.prev=t)},n.getIndex=function(){for(var t=this,n=-1;t;)t=t.prev,++n;return n},t}();var E=function(){function t(t,n,e,r,i,o,s,a){this.prevList=t,this.list=n,this.added=e,this.removed=r,this.changed=i,this.maintained=o,this.changedBeforeAdded=s,this.fixed=a}var n=t.prototype;return Object.defineProperty(n,"ordered",{get:function(){return this.cacheOrdered||this.caculateOrdered(),this.cacheOrdered},enumerable:!0,configurable:!0}),Object.defineProperty(n,"pureChanged",{get:function(){return this.cachePureChanged||this.caculateOrdered(),this.cachePureChanged},enumerable:!0,configurable:!0}),n.caculateOrdered=function(){var t=function(t,e){var a=[],u=[];return t.forEach(function(t){var n=t[0],e=t[1],r=new i;a[n]=r,u[e]=r}),a.forEach(function(t,n){t.connect(a[n-1])}),t.filter(function(t,n){return!e[n]}).map(function(t,n){var e=t[0],r=t[1];if(e===r)return[0,0];var i=a[e],o=u[r-1],s=i.getIndex();return i.disconnect(),o?i.connect(o,o.next):i.connect(void 0,a[0]),[s,i.getIndex()]})}(this.changedBeforeAdded,this.fixed),a=this.changed,u=[];this.cacheOrdered=t.filter(function(t,n){var e=t[0],r=t[1],i=a[n],o=i[0],s=i[1];if(e!==r)return u.push([o,s]),!0}),this.cachePureChanged=u},t}();function c(t,n,e){var r=_?Map:e?b:y,i=e||function(t){return t},o=[],s=[],a=[],u=t.map(i),c=n.map(i),l=new r,f=new r,h=[],p=[],d={},v=[],g=0,m=0;return u.forEach(function(t,n){l.set(t,n)}),c.forEach(function(t,n){f.set(t,n)}),u.forEach(function(t,n){var e=f.get(t);void 0===e?(++m,s.push(n)):d[e]=m}),c.forEach(function(t,n){var e=l.get(t);void 0===e?(o.push(n),++g):(a.push([e,n]),m=d[n]||0,h.push([e-m,n-g]),p.push(n===e),e!==n&&v.push([e,n]))}),s.reverse(),new E(t,n,o,s,v,a,h,p)}var n="string",a="number",u="undefined";function l(t){return typeof t===n}function d(t,r){return void 0===r&&(r="-"),t.replace(/([a-z])([A-Z])/g,function(t,n,e){return""+n+r+e.toLowerCase()})}var f=function(t,n){return(f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var e in n)n.hasOwnProperty(e)&&(t[e]=n[e])})(t,n)};function h(t,n){function e(){this.constructor=t}f(t,n),t.prototype=null===n?Object.create(n):(e.prototype=n.prototype,new e)}var v=function(){return(v=Object.assign||function(t){for(var n,e=1,r=arguments.length;e<r;e++)for(var i in n=arguments[e])Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i]);return t}).apply(this,arguments)};function g(t,n){var e={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&n.indexOf(r)<0&&(e[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)n.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(e[r[i]]=t[r[i]])}return e}function m(t,n){if(t===n)return!1;for(var e in t)if(!(e in n))return!0;for(var e in n)if(t[e]!==n[e])return!0;return!1}function P(i,o){var s=Object.keys(i),e=Object.keys(o),t=c(s,e,function(t){return t}),r={},a={},u={};return t.added.forEach(function(t){var n=e[t];r[n]=o[n]}),t.removed.forEach(function(t){var n=s[t];a[n]=i[n]}),t.maintained.forEach(function(t){var n=t[0],e=s[n],r=[i[e],o[e]];i[e]!==o[e]&&(u[e]=r)}),{added:r,removed:a,changed:u}}function x(t){t.forEach(function(t){t()})}function C(t){var n=0;return t.map(function(t){return null==t?"$compat"+ ++n:""+t})}function O(t,n,e,r){return l(t)||function(t){return typeof t===a}(t)?new F("text_"+t,n,e,r,null,{}):new("string"==typeof t.type?k:t.type.prototype.render?X:z)(t.type,n,e,r,t.ref,t.props)}function w(t){var n=[];return t.forEach(function(t){n=n.concat(function(t){return Array.isArray(t)}(t)?w(t):t)}),n}function S(t){var n=t.className,e=g(t,["className"]);return null!=n&&(e.class=n),delete e.style,delete e.children,e}function D(t,n){if(!n)return t;for(var e in n)typeof t[e]===u&&(t[e]=n[e]);return t}function j(t,n){for(var e=[],r=2;r<arguments.length;r++)e[r-2]=arguments[r];var i=n||{},o=i.key,s=i.ref,a=g(i,["key","ref"]);return{type:t,key:o,ref:s,props:v(v({},a),{children:w(e).filter(function(t){return null!=t&&!1!==t})})}}var t=function(){function t(t,n,e,r,i,o){void 0===o&&(o={}),this.type=t,this.key=n,this.index=e,this.container=r,this.ref=i,this.props=o,this._providers=[]}var n=t.prototype;return n._should=function(t,n){return!0},n._update=function(t,n,e,r){if(this.base&&!l(n)&&!r&&!this._should(n.props,e))return!1;this.original=n,this._setState(e);var i=this.props;return l(n)||(this.props=n.props,this.ref=n.ref),this._render(t,this.base?i:{},e),!0},n._mounted=function(){var t=this.ref;t&&t(this.base)},n._setState=function(t){},n._updated=function(){var t=this.ref;t&&t(this.base)},n._destroy=function(){var t=this.ref;t&&t(null)},t}();function M(t){var n={},e={};for(var r in t)0===r.indexOf("on")?e[r.replace("on","").toLowerCase()]=t[r]:n[r]=t[r];return{attributes:n,events:e}}var F=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}h(n,t);var e=n.prototype;return e._render=function(t){var n=this,e=!this.base;return e&&(this.base=document.createTextNode(this.type.replace("text_",""))),t.push(function(){e?n._mounted():n._updated()}),!0},e._unmount=function(){this.base.parentNode.removeChild(this.base)},n}(t),k=function(n){function t(){var t=null!==n&&n.apply(this,arguments)||this;return t.events={},t._isSVG=!1,t}h(t,n);var e=t.prototype;return e.addEventListener=function(t,n){var e=this.events;e[t]=function(t){t.nativeEvent=t,n(t)},this.base.addEventListener(t,e[t])},e.removeEventListener=function(t){var n=this.events;this.base.removeEventListener(t,n[t]),delete n[t]},e._should=function(t){return m(this.props,t)},e._render=function(t,n){var e=this,r=!this.base;if(r){var i=this._hasSVG();this._isSVG=i;var o=this.props.portalContainer;if(!o){var s=this.type;o=i?document.createElementNS("http://www.w3.org/2000/svg",s):document.createElement(s)}this.base=o}$(this,this._providers,this.props.children,t,null);var a=this.base,u=M(n),c=u.attributes,l=u.events,f=M(this.props),h=f.attributes,p=f.events;return function(t,n,e){var r=P(t,n),i=r.added,o=r.removed,s=r.changed;for(var a in i)e.setAttribute(a,i[a]);for(var a in s)e.setAttribute(a,s[a][1]);for(var a in o)e.removeAttribute(a)}(S(c),S(h),a),function(t,n,e){var r=P(t,n),i=r.added,o=r.removed,s=r.changed;for(var a in o)e.removeEventListener(a);for(var a in i)e.addEventListener(a,i[a]);for(var a in s)e.removeEventListener(a),e.addEventListener(a,s[a][1]);for(var a in o)e.removeEventListener(a)}(l,p,this),function(t,n,e){var r=e.style,i=P(t,n),o=i.added,s=i.removed,a=i.changed;for(var u in o){var c=d(u,"-");r.setProperty?r.setProperty(c,o[u]):r[c]=o[u]}for(var u in a){c=d(u,"-");r.setProperty?r.setProperty(c,a[u][1]):r[c]=a[u][1]}for(var u in s){c=d(u,"-");r.removeProperty?r.removeProperty(c):r[c]=""}}(n.style||{},this.props.style||{},a),t.push(function(){r?e._mounted():e._updated()}),!0},e._unmount=function(){var t=this.events,n=this.base;for(var e in t)n.removeEventListener(e,t[e]);this._providers.forEach(function(t){t._unmount()}),this.events={},this.props.portalContainer||n.parentNode.removeChild(n)},e._hasSVG=function(){if(this._isSVG||"svg"===this.type)return!0;var t=N(this.container);return t&&"ownerSVGElement"in t},t}(t);function N(t){if(!t)return null;var n=t.base;return n instanceof Node?n:N(t.container)}function T(t){if(!t)return null;if(t instanceof Node)return t;var n=t.$_provider._providers;return n.length?T(n[0].base):null}var z=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}h(n,t);var e=n.prototype;return e._render=function(t){var n=this.type(this.props);return $(this,this._providers,n?[n]:[],t),!0},e._unmount=function(){this._providers.forEach(function(t){t._unmount()})},n}(t),Y=function(e){function t(t){var n=e.call(this,"container","container",0,null)||this;return n.base=t,n}h(t,e);var n=t.prototype;return n._render=function(){return!0},n._unmount=function(){},t}(t),X=function(s){function t(t,n,e,r,i,o){return void 0===o&&(o={}),s.call(this,t,n,e,r,i,D(o,t.defaultProps))||this}h(t,s);var n=t.prototype;return n._should=function(t,n){return this.base.shouldComponentUpdate(D(t,this.type.defaultProps),n||this.base.state)},n._render=function(t,n,e){var r=this;this.props=D(this.props,this.type.defaultProps);var i=!this.base;i?(this.base=new this.type(this.props),this.base.$_provider=this):this.base.props=this.props;var o=this.base,s=o.state,a=o.render();a&&a.props&&!a.props.children.length&&(a.props.children=this.props.children),$(this,this._providers,a?[a]:[],t,e,null),t.push(function(){i?(r._mounted(),o.componentDidMount()):(r._updated(),o.componentDidUpdate(n,s))})},n._setState=function(t){var n=this.base;n&&t&&(n.state=t)},n._unmount=function(){this._providers.forEach(function(t){t._unmount()}),clearTimeout(this.base.$_timer),this.base.componentWillUnmount()},t}(t),G=function(){function t(t){void 0===t&&(t={}),this.props=t,this.state={},this.$_timer=0,this.$_state={}}var n=t.prototype;return n.shouldComponentUpdate=function(t,n){return!0},n.render=function(){return null},n.setState=function(t,n,e){var r=this;this.$_timer||(this.$_state={}),clearTimeout(this.$_timer),this.$_timer=0,this.$_state=v(v({},this.$_state),t),e?this.$_setState(n,e):this.$_timer=setTimeout(function(){r.$_timer=0,r.$_setState(n,e)})},n.forceUpdate=function(t){this.setState({},t,!0)},n.componentDidMount=function(){},n.componentDidUpdate=function(t,n){},n.componentWillUnmount=function(){},n.$_setState=function(t,n){var e=[],r=this.$_provider;$(r.container,[r],[r.original],e,v(v({},this.state),this.$_state),n)&&(t&&e.push(t),x(e))},t}(),A=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return h(n,t),n.prototype.shouldComponentUpdate=function(t,n){return m(this.props,t)||m(this.state,n)},n}(G),R=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}h(n,t);var e=n.prototype;return e.componentDidMount=function(){var t=this.props,n=t.element,e=t.container;this._portalProvider=new Y(e),I(n,e,this._portalProvider)},e.componentDidUpdate=function(){var t=this.props;I(t.element,t.container,this._portalProvider)},e.componentWillUnmount=function(){I(null,this.props.container,this._portalProvider),this._portalProvider=null},n}(A);function L(i,s,o){var a=o.map(function(t){return l(t)?null:t.key}),t=c(C(s.map(function(t){return t.key})),C(a),function(t){return t});t.removed.forEach(function(t){s.splice(t,1)[0]._unmount()}),t.ordered.forEach(function(t){var n=t[0],e=t[1],r=s.splice(n,1)[0];s.splice(e,0,r);var i=T(r.base),o=T(s[e+1]&&s[e+1].base);i&&i.parentNode.insertBefore(i,o)}),t.added.forEach(function(t){s.splice(t,0,O(o[t],a[t],t,i))});var n=t.maintained.filter(function(t){t[0];var n=t[1],e=o[n],r=s[n];return(l(e)?"text_"+e:e.type)!==r.type?(r._unmount(),s.splice(n,1,O(e,a[n],n,i)),!0):(r.index=n,!1)});return function(){for(var t=0,n=0,e=arguments.length;n<e;n++)t+=arguments[n].length;var r=Array(t),i=0;for(n=0;n<e;n++)for(var o=arguments[n],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r}(t.added,n.map(function(t){t[0];return t[1]}))}function $(i,o,e,r,s,a){var t=L(i,o,e),n=o.filter(function(t,n){return t._update(r,e[n],s,a)}),u=N(i);return u&&t.reverse().forEach(function(t){var n=o[t],e=T(n.base);if(e&&u!==e&&!e.parentNode){var r=function(t,n){for(var e=t._providers,r=e.length,i=n.index+1;i<r;++i){var o=T(e[i].base);if(o)return o}return null}(i,n);u.insertBefore(e,r)}}),0<n.length}function I(t,n,e){void 0===e&&(e=n.__REACT_COMPAT__);var r=!!e;return function(t,n,e){var r=[];$(t,t._providers,n,r,e),x(r)}(e=e||new Y(n),t?[t]:[]),r||(n.__REACT_COMPAT__=e),e}function U(t,n,e){var r=n.__REACT_COMPAT__;t&&!r&&(n.innerHTML=""),I(t,n,r),e&&e()}var B="function",W="object",V={cm:function(t){return 96*t/2.54},mm:function(t){return 96*t/254},in:function(t){return 96*t},pt:function(t){return 96*t/72},pc:function(t){return 96*t/6},"%":function(t,n){return t*n/100},vw:function(t,n){return void 0===n&&(n=window.innerWidth),t/100*n},vh:function(t,n){return void 0===n&&(n=window.innerHeight),t/100*n},vmax:function(t,n){return void 0===n&&(n=Math.max(window.innerWidth,window.innerHeight)),t/100*n},vmin:function(t,n){return void 0===n&&(n=Math.min(window.innerWidth,window.innerHeight)),t/100*n}};function Q(t,n){var e=function(t){var n=/^([^\d|e|\-|\+]*)((?:\d|\.|-|e-|e\+)+)(\S*)$/g.exec(t);if(!n)return{prefix:"",unit:"",value:NaN};var e=n[1],r=n[2];return{prefix:e,unit:n[3],value:parseFloat(r)}}(t),r=e.value,i=e.unit;if(function(t){return t&&typeof t===W}(n)){var o=n[i];if(o){if(function(t){return typeof t===B}(o))return o(r);if(V[i])return V[i](r,o)}}else if("%"===i)return r*n/100;return V[i]?V[i](r):r}var H=function(t,n){return(H=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var e in n)n.hasOwnProperty(e)&&(t[e]=n[e])})(t,n)};var Z=function(n){function t(){var t=null!==n&&n.apply(this,arguments)||this;return t.state={scrollPos:0},t.width=0,t.height=0,t}!function(t,n){function e(){this.constructor=t}H(t,n),t.prototype=null===n?Object.create(n):(e.prototype=n.prototype,new e)}(t,n);var e=t.prototype;return e.render=function(){return j("canvas",{ref:p(this,"canvasElement"),style:this.props.style})},e.componentDidMount=function(){var t=this.canvasElement.getContext("2d");this.canvasContext=t,this.resize()},e.componentDidUpdate=function(){this.resize()},e.scroll=function(t){this.draw(t)},e.resize=function(){var t=this.canvasElement,n=this.props,e=n.width,r=n.height,i=n.scrollPos;this.width=e||t.offsetWidth,this.height=r||t.offsetHeight,t.width=2*this.width,t.height=2*this.height,this.draw(i)},e.draw=function(t){void 0===t&&(t=this.state.scrollPos);var n=this.props,e=n,r=e.unit,i=e.zoom,o=e.type,s=e.backgroundColor,a=e.lineColor,u=e.textColor,c=e.direction,l=e.negativeRuler,f=void 0===l||l,h=e.segment,p=void 0===h?10:h,d=e.textFormat,v=e.range,g=void 0===v?[-1/0,1/0]:v,m=this.width,y=this.height;this.state.scrollPos=t;var b=this.canvasContext,_="horizontal"===o,E="start"===c,P=!1!==f,x=n.font||"10px sans-serif",C=n.textAlign||"left",O=n.textOffset||[0,0],w=_?y:m,S=Q(""+(n.mainLineSize||"100%"),w),D=Q(""+(n.longLineSize||10),w),j=Q(""+(n.shortLineSize||7),w);"transparent"===s?b.clearRect(0,0,2*m,2*y):(b.rect(0,0,2*m,2*y),b.fillStyle=s,b.fill()),b.save(),b.scale(2,2),b.strokeStyle=a,b.lineWidth=1,b.font=x,b.fillStyle=u,E&&(b.textBaseline="top"),b.translate(.5,0),b.beginPath();for(var M=_?m:y,F=i*r,k=Math.floor(t*i/F),N=Math.ceil((t*i+M)/F)-k,T=Math.max(["left","center","right"].indexOf(C)-1,-1),z=0;z<=N;++z){var Y=z+k;if(P||!(Y<0)){for(var X=Y*r,G=(X-t)*i,A=0;A<p;++A){var R=G+A/p*F,L=X+A/p*r;if(!(R<0||M<=R||L<g[0]||L>g[1])){var $=0===A?S:A%2==0?D:j,I=_?[R,E?0:y-$]:[E?0:m-$,R],U=I[0],B=I[1],W=_?[U,B+$]:[U+$,B],V=W[0],H=W[1];b.moveTo(U,B),b.lineTo(V,H)}}if(!(G<-F||M+r*i<=G||X<g[0]||X>g[1])){var Z=_?[G+-3*T,E?17:y-17]:[E?17:m-17,G+3*T],q=Z[0],J=Z[1],K=""+X;d&&(K=d(X)),b.textAlign=C,_?b.fillText(K,q+O[0],J+O[1]):(b.save(),b.translate(q+O[0],J+O[1]),b.rotate(-Math.PI/2),b.fillText(K,0,0),b.restore())}}}b.stroke(),b.restore()},t.defaultProps={type:"horizontal",zoom:1,width:0,height:0,unit:50,negativeRuler:!0,mainLineSize:"100%",longLineSize:10,shortLineSize:7,segment:10,direction:"end",style:{width:"100%",height:"100%"},backgroundColor:"#333333",font:"10px sans-serif",textColor:"#ffffff",lineColor:"#777777",range:[-1/0,1/0]},t}(A),q=["type","width","height","unit","zoom","style","backgroundColor","lineColor","textColor","direction","textFormat","scrollPos","textAlign","mainLineSize","longLineSize","shortLineSize","negativeRuler","textOffset","font","segment"];function J(t){return t&&"object"==typeof t}var K=function(){return(K=Object.assign||function(t){for(var n,e=1,r=arguments.length;e<r;e++)for(var i in n=arguments[e])Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i]);return t}).apply(this,arguments)};var tt=function(){function t(){this._events={}}var n=t.prototype;return n.on=function(t,n){if(J(t))for(var e in t)this.on(e,t[e]);else this._addEvent(t,n,{});return this},n.off=function(t,n){if(t)if(J(t))for(var e in t)this.off(e);else if(n){var r=this._events[t];if(r){var i=function(t,n,e){void 0===e&&(e=-1);for(var r=t.length,i=0;i<r;++i)if(n(t[i],i,t))return i;return e}(r,function(t){return t.listener===n});-1<i&&r.splice(i,1)}}else this._events[t]=[];else this._events={};return this},n.once=function(n,t){var e=this;return t&&this._addEvent(n,t,{once:!0}),new Promise(function(t){e._addEvent(n,t,{once:!0})})},n.emit=function(n,e){var r=this;void 0===e&&(e={});var t=this._events[n];if(!n||!t)return!0;var i=!1;return e.eventType=n,e.stop=function(){i=!0},e.currentTarget=this,function(){for(var t=0,n=0,e=arguments.length;n<e;n++)t+=arguments[n].length;var r=Array(t),i=0;for(n=0;n<e;n++)for(var o=arguments[n],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r}(t).forEach(function(t){t.listener(e),t.once&&r.off(n,t.listener)}),!i},n.trigger=function(t,n){return void 0===n&&(n={}),this.emit(t,n)},n._addEvent=function(t,n,e){var r=this._events;r[t]=r[t]||[],r[t].push(K({listener:n},e))},t}();function nt(){return Date.now?Date.now():(new Date).getTime()}function et(t,n,e,r){t.addEventListener(n,e,r)}function rt(t,n,e,r){t.removeEventListener(n,e,r)}var it=function(t,n){return(it=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var e in n)n.hasOwnProperty(e)&&(t[e]=n[e])})(t,n)};var ot=function(){return(ot=Object.assign||function(t){for(var n,e=1,r=arguments.length;e<r;e++)for(var i in n=arguments[e])Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i]);return t}).apply(this,arguments)};function st(t){return function(t,n){var e=n[0]-t[0],r=n[1]-t[1],i=Math.atan2(r,e);return 0<=i?i:i+2*Math.PI}([t[0].clientX,t[0].clientY],[t[1].clientX,t[1].clientY])/Math.PI*180}function at(t){return t.touches?function(t){for(var n=Math.min(t.length,2),e=[],r=0;r<n;++r)e.push(lt(t[r]));return e}(t.touches):[lt(t)]}function ut(t,n,e){var r=e.length,i=ft(t,r),o=i.clientX,s=i.clientY,a=i.originalClientX,u=i.originalClientY,c=ft(n,r),l=c.clientX,f=c.clientY,h=ft(e,r);return{clientX:a,clientY:u,deltaX:o-l,deltaY:s-f,distX:o-h.clientX,distY:s-h.clientY}}function ct(t){return Math.sqrt(Math.pow(t[0].clientX-t[1].clientX,2)+Math.pow(t[0].clientY-t[1].clientY,2))}function lt(t){return{clientX:t.clientX,clientY:t.clientY}}function ft(t,n){void 0===n&&(n=t.length);for(var e={clientX:0,clientY:0,originalClientX:0,originalClientY:0},r=0;r<n;++r){var i=t[r];e.originalClientX+="originalClientX"in i?i.originalClientX:i.clientX,e.originalClientY+="originalClientY"in i?i.originalClientY:i.clientY,e.clientX+=i.clientX,e.clientY+=i.clientY}return n?{clientX:e.clientX/n,clientY:e.clientY/n,originalClientX:e.originalClientX/n,originalClientY:e.originalClientY/n}:e}var ht=function(){function t(t){this.prevClients=[],this.startClients=[],this.movement=0,this.length=0,this.startClients=t,this.prevClients=t,this.length=t.length}var n=t.prototype;return n.addClients=function(t){void 0===t&&(t=this.prevClients);var n=this.getPosition(t),e=n.deltaX,r=n.deltaY;return this.movement+=Math.sqrt(e*e+r*r),this.prevClients=t,n},n.getAngle=function(t){return void 0===t&&(t=this.prevClients),st(t)},n.getRotation=function(t){return void 0===t&&(t=this.prevClients),st(t)-st(this.startClients)},n.getPosition=function(t){return ut(t||this.prevClients,this.prevClients,this.startClients)},n.getPositions=function(e){void 0===e&&(e=this.prevClients);var r=this.prevClients;return this.startClients.map(function(t,n){return ut([e[n]],[r[n]],[t])})},n.getMovement=function(t){var n=this.movement;if(!t)return n;var e=ft(t,this.length),r=ft(this.prevClients,this.length),i=e.clientX-r.clientX,o=e.clientY-r.clientY;return Math.sqrt(i*i+o*o)+n},n.getDistance=function(t){return void 0===t&&(t=this.prevClients),ct(t)},n.getScale=function(t){return void 0===t&&(t=this.prevClients),ct(t)/ct(this.startClients)},n.move=function(n,e){this.startClients.forEach(function(t){t.clientX-=n,t.clientY-=e}),this.prevClients.forEach(function(t){t.clientX-=n,t.clientY-=e})},t}(),pt=["textarea","input"],dt=function(u){function t(t,n){void 0===n&&(n={});var m=u.call(this)||this;m.options={},m.flag=!1,m.pinchFlag=!1,m.datas={},m.isDrag=!1,m.isPinch=!1,m.isMouse=!1,m.isTouch=!1,m.clientStores=[],m.targets=[],m.prevTime=0,m.doubleFlag=!1,m.onDragStart=function(t,n){if(void 0===n&&(n=!0),m.flag||!1!==t.cancelable){var e=m.options,r=e.container,i=e.pinchOutside,o=e.preventRightClick,s=e.preventDefault,a=e.checkInput,u=m.isTouch,c=!m.flag;if(c){var l=document.activeElement,f=t.target,h=f.tagName.toLowerCase(),p=-1<pt.indexOf(h),d=f.isContentEditable;if(p||d){if(a||l===f)return!1;if(l&&d&&l.isContentEditable&&l.contains(f))return!1}else if((s||"touchstart"===t.type)&&l){var v=l.tagName;(l.isContentEditable||-1<pt.indexOf(v))&&l.blur()}if(m.clientStores=[new ht(at(t))],m.flag=!0,m.isDrag=!1,m.datas={},o&&(3===t.which||2===t.button))return m.initDrag(),!1;m.doubleFlag=nt()-m.prevTime<200,!1===m.emit("dragStart",ot({datas:m.datas,inputEvent:t,isTrusted:n,isDouble:m.doubleFlag},m.getCurrentStore().getPosition()))&&m.initDrag(),m.flag&&s&&t.preventDefault()}if(!m.flag)return!1;var g=0;if(c&&u&&i&&(g=setTimeout(function(){et(r,"touchstart",m.onDragStart,{passive:!1})})),!c&&u&&i&&rt(r,"touchstart",m.onDragStart),m.flag&&function(t){return t.touches&&2<=t.touches.length}(t)){if(clearTimeout(g),c&&t.touches.length!==t.changedTouches.length)return;m.pinchFlag||m.onPinchStart(t)}}},m.onDrag=function(t,n){if(m.flag){var e=at(t),r=m.moveClients(e,t,!1);if(m.pinchFlag||r.deltaX||r.deltaY)if(!1===m.emit("drag",ot({},r,{isScroll:!!n,inputEvent:t})))return void m.stop();m.pinchFlag&&m.onPinch(t,e),m.getCurrentStore().addClients(e)}},m.onDragEnd=function(t){if(m.flag){var n=m.options,e=n.pinchOutside,r=n.container;m.isTouch&&e&&rt(r,"touchstart",m.onDragStart),m.flag=!1;var i=m.getCurrentStore().getPosition(),o=nt(),s=!m.isDrag&&m.doubleFlag;m.prevTime=m.isDrag||s?0:o,m.emit("dragEnd",ot({datas:m.datas,isDouble:s,isDrag:m.isDrag,isClick:!m.isDrag,inputEvent:t},i)),m.pinchFlag&&m.onPinchEnd(t),m.clientStores=[]}},m.onBlur=function(){m.onDragEnd()};var e=[].concat(t);m.options=ot({checkInput:!1,container:1<e.length?window:e[0],preventRightClick:!0,preventDefault:!0,checkWindowBlur:!1,pinchThreshold:0,events:["touch","mouse"]},n);var r=m.options,i=r.container,o=r.events,s=r.checkWindowBlur;if(m.isTouch=-1<o.indexOf("touch"),m.isMouse=-1<o.indexOf("mouse"),m.targets=e,m.isMouse&&(e.forEach(function(t){et(t,"mousedown",m.onDragStart)}),et(i,"mousemove",m.onDrag),et(i,"mouseup",m.onDragEnd),et(i,"contextmenu",m.onDragEnd)),s&&et(window,"blur",m.onBlur),m.isTouch){var a={passive:!1};e.forEach(function(t){et(t,"touchstart",m.onDragStart,a)}),et(i,"touchmove",m.onDrag,a),et(i,"touchend",m.onDragEnd,a),et(i,"touchcancel",m.onDragEnd,a)}return m}!function(t,n){function e(){this.constructor=t}it(t,n),t.prototype=null===n?Object.create(n):(e.prototype=n.prototype,new e)}(t,u);var n=t.prototype;return n.stop=function(){this.isDrag=!1,this.flag=!1,this.clientStores=[],this.datas={}},n.getMovement=function(t){return this.getCurrentStore().getMovement(t)+this.clientStores.slice(1).reduce(function(t,n){return t+n.movement},0)},n.isDragging=function(){return this.isDrag},n.isFlag=function(){return this.flag},n.isPinchFlag=function(){return this.pinchFlag},n.isDoubleFlag=function(){return this.doubleFlag},n.isPinching=function(){return this.isPinch},n.scrollBy=function(t,n,e,r){void 0===r&&(r=!0),this.flag&&(this.clientStores[0].move(t,n),r&&this.onDrag(e,!0))},n.move=function(t,n){var r=t[0],i=t[1],e=this.getCurrentStore().prevClients;return this.moveClients(e.map(function(t){var n=t.clientX,e=t.clientY;return{clientX:n+r,clientY:e+i,originalClientX:n,originalClientY:e}}),n,!0)},n.triggerDragStart=function(t){this.onDragStart(t,!1)},n.setEventDatas=function(t){var n=this.datas;for(var e in t)n[e]=t[e];return this},n.getEventDatas=function(){return this.datas},n.unset=function(){var n=this,t=this.targets,e=this.options.container;this.off(),rt(window,"blur",this.onBlur),this.isMouse&&(t.forEach(function(t){rt(t,"mousedown",n.onDragStart)}),rt(e,"mousemove",this.onDrag),rt(e,"mouseup",this.onDragEnd),rt(e,"contextmenu",this.onDragEnd)),this.isTouch&&(t.forEach(function(t){rt(t,"touchstart",n.onDragStart)}),rt(e,"touchstart",this.onDragStart),rt(e,"touchmove",this.onDrag),rt(e,"touchend",this.onDragEnd),rt(e,"touchcancel",this.onDragEnd))},n.onPinchStart=function(t){var n=this.options.pinchThreshold;if(!(this.isDrag&&this.getMovement()>n)){var e=new ht(at(t));this.pinchFlag=!0,this.clientStores.splice(0,0,e),!1===this.emit("pinchStart",ot({datas:this.datas,angle:e.getAngle(),touches:this.getCurrentStore().getPositions()},e.getPosition(),{inputEvent:t}))&&(this.pinchFlag=!1)}},n.onPinch=function(t,n){if(this.flag&&this.pinchFlag&&!(n.length<2)){var e=this.getCurrentStore();this.isPinch=!0,this.emit("pinch",ot({datas:this.datas,movement:this.getMovement(n),angle:e.getAngle(n),rotation:e.getRotation(n),touches:e.getPositions(n),scale:e.getScale(n),distance:e.getDistance(n)},e.getPosition(n),{inputEvent:t}))}},n.onPinchEnd=function(t){if(this.pinchFlag){var n=this.isPinch;this.isPinch=!1,this.pinchFlag=!1;var e=this.getCurrentStore();this.emit("pinchEnd",ot({datas:this.datas,isPinch:n,touches:e.getPositions()},e.getPosition(),{inputEvent:t})),this.isPinch=!1,this.pinchFlag=!1}},n.initDrag=function(){this.clientStores=[],this.pinchFlag=!1,this.doubleFlag=!1,this.prevTime=0,this.flag=!1},n.getCurrentStore=function(){return this.clientStores[0]},n.moveClients=function(t,n,e){var r=this.getCurrentStore()[e?"addClients":"getPosition"](t);return(r.deltaX||r.deltaY)&&(this.isDrag=!0),ot({datas:this.datas},r,{movement:this.getMovement(t),isDrag:this.isDrag,isPinch:this.isPinch,isScroll:!1,inputEvent:n})},t}(tt),vt="string",gt=[{open:"(",close:")"},{open:'"',close:'"'},{open:"'",close:"'"},{open:'\\"',close:'\\"'},{open:"\\'",close:"\\'"}];function mt(t,n,e,r,i){return yt(t,n,e)?e:function(i,o,t,s,a){for(var u,n=function(t){var n=o[t].trim();if(n===i.close&&!yt(i,o,t))return{value:t};var e=t,r=_t(a,function(t){return t.open===n});if(r&&(e=mt(r,o,t,s,a)),-1===e)return u=t,"break";u=t=e},e=t;e<s;++e){var r=n(e);if(e=u,"object"==typeof r)return r.value;if("break"===r)break}return-1}(t,n,e+1,r,i)}function yt(t,n,e){if(!t.ignore)return null;var r=n.slice(Math.max(e-3,0),e+3).join("");return new RegExp(t.ignore).exec(r)}function bt(t,n){var e=function(t){return typeof t===vt}(n)?{separator:n}:n,r=e.separator,o=void 0===r?",":r,s=e.isSeparateFirst,a=e.isSeparateOnlyOpenClose,i=e.isSeparateOpenClose,u=void 0===i?a:i,c=e.openCloseCharacters,l=void 0===c?gt:c,f=l.map(function(t){var n=t.open,e=t.close;return n===e?n:n+"|"+e}).join("|"),h=new RegExp("(\\s*"+o+"\\s*|"+f+"|\\s+)","g"),p=t.split(h).filter(Boolean),d=p.length,v=[],g=[];function m(){return!!g.length&&(v.push(g.join("")),g=[],!0)}for(var y,b=function(t){var n=p[t].trim(),e=t,r=_t(l,function(t){return t.open===n}),i=_t(l,function(t){return t.close===n});if(r){if(-1!==(e=mt(r,p,t,d,l))&&u)return m()&&s?(y=t,"break"):(v.push(p.slice(t,e+1).join("")),t=e,s?(y=t,"break"):(y=t,"continue"))}else{if(i&&!yt(i,p,t))throw new Error("invalid format: "+i.close);if(function(t,n){return(""===n||" "==n)&&(""===t||" "==t)||t===n}(n,o)&&!a)return m(),s?(y=t,"break"):(y=t,"continue")}-1===e&&(e=d-1),g.push(p.slice(t,e+1).join("")),y=t=e},_=0;_<d;++_){var E=b(_);if(_=y,"break"===E)break}return g.length&&v.push(g.join("")),v}function _t(t,n,e){var r=function(t,n,e){void 0===e&&(e=-1);for(var r=t.length,i=0;i<r;++i)if(n(t[i],i,t))return i;return e}(t,n);return-1<r?t[r]:e}var Et=function(t){for(var n=5381,e=t.length;e;)n=33*n^t.charCodeAt(--e);return n>>>0};function Pt(r,t,n){return n.original?t:t.replace(/([^};{\s}][^};{]*|^\s*){/gm,function(t,n){var e=n.trim();return(e?function(t){return bt(t,",")}(e):[""]).map(function(t){var n=t.trim();return 0===n.indexOf("@")?n:-1<n.indexOf(":global")?n.replace(/\:global/g,""):-1<n.indexOf(":host")?""+n.replace(/\:host/g,"."+r):n?"."+r+" "+n:"."+r}).join(", ")+" {"})}function xt(o){var s,a="rCS"+function(t){return Et(t).toString(36)}(o),u=0;return{className:a,inject:function(t,n){void 0===n&&(n={});var e,r=function(t){if(t&&t.getRootNode){var n=t.getRootNode();if(11===n.nodeType)return n}}(t),i=0===u;return(r||i)&&(e=function(t,n,e,r){var i=document.createElement("style");return i.setAttribute("type","text/css"),i.setAttribute("data-styled-id",t),e.nonce&&i.setAttribute("nonce",e.nonce),i.innerHTML=Pt(t,n,e),(r||document.head||document.body).appendChild(i),i}(a,o,n,r)),i&&(s=e),r||++u,{destroy:function(){r?(t.removeChild(e),e=null):(0<u&&--u,0===u&&s&&(s.parentNode.removeChild(s),s=null))}}}}}var Ct=function(t,n){return(Ct=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var e in n)n.hasOwnProperty(e)&&(t[e]=n[e])})(t,n)};function Ot(t,n){function e(){this.constructor=t}Ct(t,n),t.prototype=null===n?Object.create(n):(e.prototype=n.prototype,new e)}var wt=function(){return(wt=Object.assign||function(t){for(var n,e=1,r=arguments.length;e<r;e++)for(var i in n=arguments[e])Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i]);return t}).apply(this,arguments)};var St=function(n){function t(){var t=null!==n&&n.apply(this,arguments)||this;return t.injectResult=null,t.tag="div",t}Ot(t,n);var e=t.prototype;return e.render=function(){var t=this.props,n=t.className,e=void 0===n?"":n,r=(t.cspNonce,t.portalContainer),i=function(t,n){var e={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&n.indexOf(r)<0&&(e[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)n.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(e[r[i]]=t[r[i]])}return e}(t,["className","cspNonce","portalContainer"]),o=this.injector.className,s=this.tag,a={};return-1<"simple-1.1.0".indexOf("simple")&&r&&(a={portalContainer:r}),j(s,wt({ref:p(this,"element"),"data-styled-id":o,className:e+" "+o},a,i))},e.componentDidMount=function(){this.injectResult=this.injector.inject(this.element,{nonce:this.props.cspNonce})},e.componentWillUnmount=function(){this.injectResult.destroy(),this.injectResult=null},e.getElement=function(){return this.element},t}(G);var Dt="string",jt=[{open:"(",close:")"},{open:'"',close:'"'},{open:"'",close:"'"},{open:'\\"',close:'\\"'},{open:"\\'",close:"\\'"}];function Mt(t,n,e,r,i){return Ft(t,n,e)?e:function(i,o,t,s,a){for(var u,n=function(t){var n=o[t].trim();if(n===i.close&&!Ft(i,o,t))return{value:t};var e=t,r=Tt(a,function(t){return t.open===n});if(r&&(e=Mt(r,o,t,s,a)),-1===e)return u=t,"break";u=t=e},e=t;e<s;++e){var r=n(e);if(e=u,"object"==typeof r)return r.value;if("break"===r)break}return-1}(t,n,e+1,r,i)}function Ft(t,n,e){if(!t.ignore)return null;var r=n.slice(Math.max(e-3,0),e+3).join("");return new RegExp(t.ignore).exec(r)}function kt(t,n){var e=function(t){return typeof t===Dt}(n)?{separator:n}:n,r=e.separator,o=void 0===r?",":r,s=e.isSeparateFirst,a=e.isSeparateOnlyOpenClose,i=e.isSeparateOpenClose,u=void 0===i?a:i,c=e.openCloseCharacters,l=void 0===c?jt:c,f=l.map(function(t){var n=t.open,e=t.close;return n===e?n:n+"|"+e}).join("|"),h=new RegExp("(\\s*"+o+"\\s*|"+f+"|\\s+)","g"),p=t.split(h).filter(Boolean),d=p.length,v=[],g=[];function m(){return!!g.length&&(v.push(g.join("")),g=[],!0)}for(var y,b=function(t){var n=p[t].trim(),e=t,r=Tt(l,function(t){return t.open===n}),i=Tt(l,function(t){return t.close===n});if(r){if(-1!==(e=Mt(r,p,t,d,l))&&u)return m()&&s?(y=t,"break"):(v.push(p.slice(t,e+1).join("")),t=e,s?(y=t,"break"):(y=t,"continue"))}else{if(i&&!Ft(i,p,t))throw new Error("invalid format: "+i.close);if(function(t,n){return(""===n||" "==n)&&(""===t||" "==t)||t===n}(n,o)&&!a)return m(),s?(y=t,"break"):(y=t,"continue")}-1===e&&(e=d-1),g.push(p.slice(t,e+1).join("")),y=t=e},_=0;_<d;++_){var E=b(_);if(_=y,"break"===E)break}return g.length&&v.push(g.join("")),v}function Nt(t){return kt(t,",")}function Tt(t,n,e){var r=function(t,n,e){void 0===e&&(e=-1);for(var r=t.length,i=0;i<r;++i)if(n(t[i],i,t))return i;return e}(t,n);return-1<r?t[r]:e}var zt=1e-7;function Yt(t,n){return n?Math.round(t/n)*n:t}function Xt(t,n,e,r,i,o){for(var s=0;s<i;++s){var a=e+s*i,u=r+s*i;t[a]+=t[u]*o,n[a]+=n[u]*o}}function Gt(t,n,e,r,i){for(var o=0;o<i;++o){var s=e+o*i,a=r+o*i,u=t[s],c=n[s];t[s]=t[a],t[a]=u,n[s]=n[a],n[a]=c}}function At(t,n,e,r,i){for(var o=0;o<r;++o){var s=e+o*r;t[s]/=i,n[s]/=i}}function Rt(t,n,e){void 0===e&&(e=Math.sqrt(t.length));var r=[],i=t.length/e,o=n.length/i;if(!i)return n;if(!o)return t;for(var s=0;s<e;++s)for(var a=0;a<o;++a)for(var u=r[a*e+s]=0;u<i;++u)r[a*e+s]+=t[u*e+s]*n[a*i+u];return r}function Lt(t,n){return Rt(t,[1,0,0,0,0,Math.cos(n),Math.sin(n),0,0,-Math.sin(n),Math.cos(n),0,0,0,0,1],4)}function $t(t,n){return Rt(t,[Math.cos(n),0,-Math.sin(n),0,0,1,0,0,Math.sin(n),0,Math.cos(n),0,0,0,0,1],4)}function It(t,n){return Rt(t,function(t,n){var e=Math.cos(t),r=Math.sin(t),i=Vt(n);return i[0]=e,i[1]=r,i[n]=-r,i[n+1]=e,i}(n,4))}function Ut(t,n){var e=n[0],r=void 0===e?1:e,i=n[1],o=void 0===i?1:i,s=n[2];return Rt(t,[r,0,0,0,0,o,0,0,0,0,void 0===s?1:s,0,0,0,0,1],4)}function Bt(t,n){var e=n[0],r=void 0===e?0:e,i=n[1],o=void 0===i?0:i,s=n[2];return Rt(t,[1,0,0,0,0,1,0,0,0,0,1,0,r,o,void 0===s?0:s,1],4)}function Wt(t,n){return Rt(t,n,4)}function Vt(t){for(var n=t*t,e=[],r=0;r<n;++r)e[r]=r%(t+1)?0:1;return e}function Ht(t){return function(t){var r=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];return t.forEach(function(t){var n=t.matrixFunction,e=t.functionValue;n&&(r=n(r,e))}),r}(function(t){return(function(t){return Array.isArray(t)}(t)?t:function(t){return kt(t,"")}(t)).map(function(t){var n=function(t){var n=/([^(]*)\(([\s\S]*)\)([\s\S]*)/g.exec(t);return!n||n.length<4?{}:{prefix:n[1],value:n[2],suffix:n[3]}}(t),e=n.prefix,r=n.value,i=null,o=e,s="";if("translate"===e||"translateX"===e||"translate3d"===e){var a=Nt(r).map(function(t){return parseFloat(t)}),u=a[0],c=a[1],l=void 0===c?0:c,f=a[2];i=Bt,s=[u,l,void 0===f?0:f]}else if("translateY"===e){i=Bt,s=[0,l=parseFloat(r),0]}else if("translateZ"===e){i=Bt,s=[0,0,parseFloat(r)]}else if("scale"===e||"scale3d"===e){var h=Nt(r).map(function(t){return parseFloat(t)}),p=h[0],d=h[1],v=void 0===d?p:d,g=h[2];i=Ut,s=[p,v,void 0===g?1:g]}else if("scaleX"===e){i=Ut,s=[p=parseFloat(r),1,1]}else if("scaleY"===e){i=Ut,s=[1,v=parseFloat(r),1]}else if("scaleZ"===e){i=Ut,s=[1,1,parseFloat(r)]}else if("rotate"===e||"rotateZ"===e||"rotateX"===e||"rotateY"===e){var m=function(t){var n=/^([^\d|e|\-|\+]*)((?:\d|\.|-|e-|e\+)+)(\S*)$/g.exec(t);if(!n)return{prefix:"",unit:"",value:NaN};var e=n[1],r=n[2];return{prefix:e,unit:n[3],value:parseFloat(r)}}(r),y=m.unit,b=m.value;"rotate"===e||"rotateZ"===e?(o="rotateZ",i=It):"rotateX"===e?i=Lt:"rotateY"===e&&(i=$t),s="rad"===y?b:b*Math.PI/180}else if("matrix3d"===e)i=Wt,s=Nt(r).map(function(t){return parseFloat(t)});else if("matrix"===e){var _=Nt(r).map(function(t){return parseFloat(t)});i=Wt,s=[_[0],_[1],0,0,_[2],_[3],0,0,0,0,1,0,_[4],_[5],0,1]}else o="";return{name:e,functionName:o,value:r,matrixFunction:i,functionValue:s}})}(t))}function Zt(t,n){var e=function(t,n,e){void 0===e&&(e=n.length);var r=Rt(t,n,e),i=r[e-1];return r.map(function(t){return t/i})}(t,[n[0],n[1]||0,n[2]||0,1],4),r=e[3]||1;return[e[0]/r,e[1]/r,e[2]/r]}function qt(t,n){void 0===n&&(n=document.body);for(var e=t,r=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];e;){if(r=Wt(Ht(getComputedStyle(e).transform),r),e===n)break;e=e.parentElement}return(r=function(t,n){void 0===n&&(n=Math.sqrt(t.length));for(var e=t.slice(),r=Vt(n),i=0;i<n;++i){var o=n*i+i;if(!Yt(e[o],zt))for(var s=i+1;s<n;++s)if(e[n*i+s]){Gt(e,r,i,s,n);break}if(!Yt(e[o],zt))return[];At(e,r,i,n,e[o]);for(s=0;s<n;++s){var a=s,u=e[s+i*n];Yt(u,zt)&&i!==s&&Xt(e,r,a,i,n,-u)}}return r}(r,4))[12]=0,r[13]=0,r[14]=0,r}var Jt=function(t,n){return(Jt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var e in n)n.hasOwnProperty(e)&&(t[e]=n[e])})(t,n)};var Kt=function(){return(Kt=Object.assign||function(t){for(var n,e=1,r=arguments.length;e<r;e++)for(var i in n=arguments[e])Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i]);return t}).apply(this,arguments)};function Qt(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return function(n){for(var t=[],e=1;e<arguments.length;e++)t[e-1]=arguments[e];return t.map(function(t){return t.split(" ").map(function(t){return t?""+n+t:""}).join(" ")}).join(" ")}.apply(void 0,["scena-"].concat(t))}Qt("ruler");var tn,nn,en,rn=Qt("guide","adder"),on=Qt("guides"),sn=Qt("guide"),an=Qt("dragging"),un=Qt("display-drag"),cn=(tn="scena-",'\n{\n    position: relative;\n    width: 100%;\n    height: 100%;\n}\ncanvas {\n    position: relative;\n}\n.guide-origin {\n    position: absolute;\n    width: 1px;\n    height: 1px;\n    top: 0;\n    left: 0;\n    opacity: 0;\n}\n.guides {\n    position: absolute;\n    bottom: 0;\n    right: 0;\n    will-change: transform;\n    z-index: 2000;\n}\n.guide-pos {\n    position: absolute;\n    font-weight: bold;\n    font-size: 12px;\n    color: #f33;\n}\n.horizontal .guide-pos {\n    bottom: 100%;\n    left: 50%;\n    transform: translate(-50%);\n}\n.vertical .guide-pos {\n    left: calc(100% + 2px);\n    top: 50%;\n    transform: translateY(-50%);\n}\n.display-drag {\n    position: absolute;\n    will-change: transform;\n    z-index: 2000;\n    font-weight: bold;\n    font-size: 12px;\n    display: none;\n    left: 20px;\n    top: -20px;\n    color: #f33;\n}\n:host.horizontal .guides {\n    width: 100%;\n    height: 0;\n}\n:host.vertical .guides {\n    height: 100%;\n    width: 0;\n}\n.guide {\n    position: absolute;\n    background: #f33;\n    z-index: 2;\n}\n.guide.dragging:before {\n    position: absolute;\n    content: "";\n    width: 100%;\n    height: 100%;\n    top: 50%;\n    left: 50%;\n    transform: translate(-50%, -50%);\n}\n:host.horizontal .guide {\n    width: 100%;\n    height: 1px;\n    cursor: row-resize;\n}\n:host.vertical .guide {\n    width: 1px;\n    height: 100%;\n    cursor: col-resize;\n}\n.mobile :host.horizontal .guide {\n    transform: scale(1, 2);\n}\n.mobile :host.vertical .guide {\n    transform: scale(2, 1);\n}\n:host.horizontal .guide:before {\n    height: 20px;\n}\n:host.vertical .guide:before {\n    width: 20px;\n}\n.adder {\n    display: none;\n}\n.adder.dragging {\n    display: block;\n}\n'.replace(/([^}{]*){/gm,function(t,n){return n.replace(/\.([^{,\s\d.]+)/g,"."+tn+"$1")+"{"})),ln=["className","rulerStyle","snapThreshold","snaps","displayDragPos","cspNonce","dragPosFormat","defaultGuides","showGuides"].concat(q),fn=(nn="div",en=xt(cn),function(n){function t(){var t=null!==n&&n.apply(this,arguments)||this;return t.injector=en,t.tag=nn,t}return Ot(t,n),t}(St)),hn=function(t){function n(){var m=null!==t&&t.apply(this,arguments)||this;return m.state={guides:[]},m.scrollPos=0,m.guideElements=[],m._isFirstMove=!1,m.onDragStart=function(t){var n=t.datas,e=t.inputEvent;m._isFirstMove=!0,m.movePos(t),m.props.onDragStart(Kt({},t,{dragElement:n.target})),e.stopPropagation(),e.preventDefault()},m.onDrag=function(t){m._isFirstMove&&(m._isFirstMove=!1,function(t,n){t.classList?t.classList.add(n):t.className+=" "+n}(t.datas.target,an));var n=m.movePos(t);return m.props.onDrag(Kt({},t,{dragElement:t.datas.target})),n},m.onDragEnd=function(t){var n=t.datas,e=t.isDouble,r=t.distX,i=t.distY,o=m.movePos(t),s=m.state.guides,a=m.props,u=a.onChangeGuides,c=a.zoom,l=a.displayDragPos,f=a.digit,h=a.lockGuides,p=parseFloat((o/c).toFixed(f||0));if(l&&(m.displayElement.style.cssText+="display: none;"),function(t,n){if(t.classList)t.classList.remove(n);else{var e=new RegExp("(\\s|^)"+n+"(\\s|$)");t.className=t.className.replace(e," ")}}(n.target,an),m.props.onDragEnd(Kt({},t,{dragElement:n.target})),n.fromRuler)m._isFirstMove&&m.props.onClickRuler(Kt({},t,{pos:0})),p>=m.scrollPos&&s.indexOf(p)<0&&m.setState({guides:s.concat([p])},function(){u({guides:m.state.guides,distX:r,distY:i,isAdd:!0,isRemove:!1,isChange:!1})});else{var d=n.target.getAttribute("data-index"),v=!1,g=!1;if(s=s.slice(),e||p<m.scrollPos){if(h&&(!0===h||-1<h.indexOf("remove")))return;s.splice(d,1),v=!0}else{if(-1<s.indexOf(p))return;if(h&&(!0===h||-1<h.indexOf("change")))return;s[d]=p,g=!0}m.setState({guides:s},function(){var t=m.state.guides;u({distX:r,distY:i,guides:t,isAdd:!1,isChange:g,isRemove:v})})}},m}!function(t,n){function e(){this.constructor=t}Jt(t,n),t.prototype=null===n?Object.create(n):(e.prototype=n.prototype,new e)}(n,t);var e=n.prototype;return e.render=function(){var t=this.props,n=t.className,e=t.type,r=t.zoom,i=t.style,o=t.rulerStyle,s=t.displayDragPos,a=t.cspNonce,u=t.dragGuideStyle,c=t.portalContainer,l=this.props,f=this.getTranslateName(),h={};return q.forEach(function(t){"style"!==t&&(h[t]=l[t])}),j(fn,{ref:p(this,"manager"),cspNonce:a,className:Qt("manager",e)+" "+n,portalContainer:c,style:i},j("div",{className:Qt("guide-origin"),ref:p(this,"originElement")}),j(Z,Kt({ref:p(this,"ruler"),style:o},h)),j("div",{className:on,ref:p(this,"guidesElement"),style:{transform:f+"("+-this.scrollPos*r+"px)"}},s&&j("div",{className:un,ref:p(this,"displayElement"),style:u}),j("div",{className:rn,ref:p(this,"adderElement")}),this.renderGuides()))},e.renderGuides=function(){var e=this,t=this.props,n=t,r=n.type,i=n.zoom,o=n.showGuides,s=n.guideStyle,a=n.displayGuidePos,u=n.guidePosStyle,c=void 0===u?{}:u,l=this.getTranslateName(),f=this.state.guides,h=t.guidePosFormat||t.dragPosFormat||function(t){return t};if(this.guideElements=[],o)return f.map(function(t,n){return j("div",{className:Qt("guide",r),ref:function(n,e,r){return function(t){t&&(n[e][r]=t)}}(e,"guideElements",n),key:n,"data-index":n,"data-pos":t,style:Kt({},s,{transform:l+"("+t*i+"px) translateZ(0px)"})},a&&j("div",{className:Qt("guide-pos"),style:c||{}},h(t)))})},e.componentDidMount=function(){var g=this;this.gesto=new dt(this.manager.getElement(),{container:document.body}).on("dragStart",function(t){var n=g.props,e=n.type,r=n.zoom,i=n.lockGuides;if(!0!==i){var o=t.inputEvent.target,s=t.datas,a=g.ruler.canvasElement,u=g.guidesElement,c="horizontal"===e,l=g.originElement.getBoundingClientRect(),f=qt(g.manager.getElement()),h=Zt(f,[t.clientX-l.left,t.clientY-l.top]);h[0]-=u.offsetLeft,h[1]-=u.offsetTop,h[c?1:0]+=g.scrollPos*r,s.offsetPos=h,s.matrix=f;var p=i&&-1<i.indexOf("add"),d=i&&-1<i.indexOf("remove"),v=i&&-1<i.indexOf("change");if(o===a){if(p)return void t.stop();s.fromRuler=!0,s.target=g.adderElement}else{if(!function(t,n){return t.classList?t.classList.contains(n):!!t.className.match(new RegExp("(\\s|^)"+n+"(\\s|$)"))}(o,sn))return t.stop(),!1;if(d&&v)return void t.stop();s.target=o}g.onDragStart(t)}else t.stop()}).on("drag",this.onDrag).on("dragEnd",this.onDragEnd),this.setState({guides:this.props.defaultGuides||[]})},e.componentWillUnmount=function(){this.gesto.unset()},e.componentDidUpdate=function(t){t.defaultGuides!==this.props.defaultGuides&&this.setState({guides:this.props.defaultGuides||[]})},e.loadGuides=function(t){this.setState({guides:t})},e.getGuides=function(){return this.state.guides},e.scrollGuides=function(e){var t=this.props.zoom,n=this.guidesElement;this.scrollPos=e,n.style.transform=this.getTranslateName()+"("+-e*t+"px)";var r=this.state.guides;this.guideElements.forEach(function(t,n){t&&(t.style.display=-e+r[n]<0?"none":"block")})},e.resize=function(){this.ruler.resize()},e.scroll=function(t){this.ruler.scroll(t)},e.movePos=function(t){var n=t.datas,e=t.distX,r=t.distY,i=this.props,o=i.type,s=i.zoom,a=i.snaps,u=i.snapThreshold,c=i.displayDragPos,l=i.digit,f=i.dragPosFormat||function(t){return t},h="horizontal"===o,p=Zt(n.matrix,[e,r]),d=n.offsetPos,v=p[0]+d[0],g=p[1]+d[1],m=Math.round(h?g:v),y=parseFloat((m/s).toFixed(l||0)),b=a.slice().sort(function(t,n){return Math.abs(y-t)-Math.abs(y-n)});if(b.length&&Math.abs(b[0]*s-m)<u&&(m=(y=b[0])*s),!n.fromRuler||!this._isFirstMove){if(c){var _="horizontal"===o?[v,m]:[m,g];this.displayElement.style.cssText+="display: block;transform: translate(-50%, -50%) translate("+_.map(function(t){return t+"px"}).join(", ")+")",this.displayElement.innerHTML=""+f(y)}var E=n.target;E.setAttribute("data-pos",y),E.style.transform=this.getTranslateName()+"("+m+"px)"}return m},e.getTranslateName=function(){return"horizontal"===this.props.type?"translateY":"translateX"},n.defaultProps={className:"",type:"horizontal",zoom:1,style:{},snapThreshold:5,snaps:[],digit:0,onClickRuler:function(){},onChangeGuides:function(){},onDragStart:function(){},onDrag:function(){},onDragEnd:function(){},displayDragPos:!1,dragPosFormat:function(t){return t},defaultGuides:[],lockGuides:!1,showGuides:!0,guideStyle:{},dragGuideStyle:{},guidePosStyle:{},portalContainer:null},n}(A),pn=ln,dn=["getGuides","loadGuides","scroll","scrollGuides","resize"],vn=["changeGuides","dragStart","drag","dragEnd","clickRuler"],gn=function(e){function t(t){var n=e.call(this,t)||this;return n.state={},n.state=n.props,n}return o(t,e),t.prototype.render=function(){var t=this.state,n=t.container,e=function(t,n){var e={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&n.indexOf(r)<0&&(e[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)n.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(e[r[i]]=t[r[i]])}return e}(t,["container"]);return function(t,n){return j(R,{element:t,container:n})}(j(hn,s({ref:p(this,"guides")},e)),n)},t}(G);var mn=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return o(n,t),n}(function(i){function t(t,n){void 0===n&&(n={});var e=i.call(this)||this;e.tempElement=document.createElement("div");var r={};return vn.forEach(function(n){r[function(t){return t.replace(/[\s-_]([a-z])/g,function(t,n){return n.toUpperCase()})}("on "+n)]=function(t){return e.trigger(n,t)}}),U(j(gn,s({},n,r,{container:t,ref:p(e,"innerGuides")})),e.tempElement),e}o(t,i);var n=t.prototype;return n.setState=function(t,n){this.innerGuides.setState(t,n)},n.destroy=function(){U(null,this.tempElement),this.tempElement=null,this.innerGuides=null},n.getInnerGuides=function(){return this.innerGuides.guides},t=function(t,n,e,r){var i,o=arguments.length,s=o<3?n:null===r?r=Object.getOwnPropertyDescriptor(n,e):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,n,e,r);else for(var a=t.length-1;0<=a;a--)(i=t[a])&&(s=(o<3?i(s):3<o?i(n,e,s):i(n,e))||s);return 3<o&&s&&Object.defineProperty(n,e,s),s}([e(dn,function(t,r){t[r]||(t[r]=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var e=this.getInnerGuides();if(e&&e[r])return e[r].apply(e,t)})}),e(pn,function(t,e){Object.defineProperty(t,e,{get:function(){return this.getInnerGuides().props[e]},set:function(t){var n;this.innerGuides.setState(((n={})[e]=t,n))},enumerable:!0,configurable:!0})})],t)}(tt)),yn={__proto__:null,default:mn,PROPERTIES:pn,METHODS:dn,EVENTS:vn};for(var bn in yn)mn[bn]=yn[bn];return mn});
//# sourceMappingURL=guides.min.js.map
