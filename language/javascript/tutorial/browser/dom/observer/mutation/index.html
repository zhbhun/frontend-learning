<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title></title>
  </head>
  <body>
    <button class="request">request</button>
    <div class="demo">
      <div class="row1">1</div>
      <div class="row2">2</div>
    </div>
    <script>
      var request = document.querySelector(".request");
      var demo = document.querySelector(".demo");
      var row1 = document.querySelector(".row1");
      var row2 = document.querySelector(".row2");
      request.addEventListener("click", () => {
        // const temp = document.createElement("div");
        // temp.innerHTML = Date.now();
        // demo.appendChild(temp);
        demo.insertBefore(row2, row1);
      });
      var observer = new MutationObserver(function (mutationsList) {
        console.log(mutationsList);
        // mutationsList参数是个MutationRecord对象数组，描述了每个发生的变化
        mutationsList.forEach(function (mutation) {
          // var target = mutation.target;
          // if (!target || !target.render) {
          //   return;
          // }
          // 变化的类型
          // switch (mutation.type) {
          //   case "characterData":
          //     // 文本内容变化
          //     target.render();
          //     break;
          //   case "attributes":
          //     // rows属性值发生了变化
          //     target.render();
          //     break;
          // }
          console.log(mutation);
        });
      });
      observer.observe(demo, {
        childList: true,
        // attributes: true,
        // subtree: true,
        // characterData: true,
        // attributeFilter: ["rows"],
      });
    </script>
  </body>
</html>
