<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta
      name="viewport"
      content="viewport-fit=cover, width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no"
    />
    <title>Document</title>
    <style>
      body {
        margin: 0;
      }
      div,
      canvas {
        display: block;
        margin-bottom: 10px;
      }
    </style>
  </head>
  <body>
    <div style="margin-bottom: 10px; height: 600px">
      <div
        id="dom"
        style="
          width: 300px;
          height: 300px;
          background-color: #f1f1f1;
          background-image: url('/watermark.png');
          /* background-size: 200px 60px; */
          background-size: 159px 58px;
          transform-origin: top left;
          transform: scale(2);
        "
      ></div>
    </div>
    <div>
      <img class="output" src="" alt="" />
    </div>
    <script src="./html2canvas.js"></script>
    <script>
      html2canvas(document.getElementById("dom"), {
        allowTaint: true,
        useCORS: true,
        backgroundColor: "transparent",
        scale: 1,
        // canvas,
      })
        .then((canvas) => {
          canvas.toBlob(
            (blob) => {
              if (blob) {
                console.log("dom", URL.createObjectURL(blob));
                document.querySelector(".output").src =
                  URL.createObjectURL(blob);
              }
            },
            "image/jpeg",
            1
          );
        })
        .catch((error) => {
          handleError(error);
        });
    </script>
  </body>
</html>
