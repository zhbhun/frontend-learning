<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
</head>
<body>
  <script>
    var xhr = new XMLHttpRequest();
    xhr.onerror = function (event) {
      console.log(1, event);
    };
    xhr.open('GET', '/', true);
    try {
      xhr.setRequestHeader('token', 'a\r\n1');
    } catch (error) {
      document.write(error.message);
      console.log(error.constructor.name, '-' , error.message);
      // chrome: DOMException - Failed to execute 'setRequestHeader' on 'XMLHttpRequest': 'a\r\n1' is not a valid HTTP header field value.
      // safari: DOMException - The string did not match the expected pattern.
    }
    xhr.send(null);
  </script>
</body>
</html>
