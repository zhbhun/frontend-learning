# 面向对象

## 基础

### 特性

- 封装：封装的目的是将信息隐藏，封装应该被视为“任何形式的封装”，也就是说，封装不仅仅是 隐藏数据，还包括隐藏实现细节、设计细节以及隐藏对象的类型等。

    从封装实现细节来讲，封装使得对象内部的变化对其他对象而言是透明的，也就是不可见的。 对象对它自己的行为负责。其他对象或者用户都不关心它的内部实现。封装使得对象之间的耦合变松散，对象之间只通过暴露的 API 接口来通信。当我们修改一个对象时，可以随意地修改它的内部实现，只要对外的接口没有变化，就不会影响到程序的其他功能。

- 继承
- 多态：同一操作作用于不同的对象上面，可以产生不同的解释和不同的执行结果。

## 进阶

### 动态类型语言 VS 静态类型语言

- 静态类型：静态类型语言在编译时便已确定变量的类型。

    - 优点：首先在编译时就能发现类型不匹配的错误，编辑器可以帮助我们提前避免程序在运行期间有可能发生的一些错误。其次，如果在程序中明确地规定了数据类型，编译器还可以针对这些信息对程序进行一些优化工作，提高程序执行速度。
    - 缺点：首先是迫使程序员依照强契约来编写程序，为每个变量规定数据类型，归根结底只是辅助我们编写可靠性高程序的一种手段，而不是编写程序的目的，毕竟大部分人编写程序的目的是为了完成需求交付生产。其次，类型的声明也会增加更多的代码，在程序编写过程中，这些细节会让程序员的精力从思考业务逻辑上分散开来。

- 动态类型：动态类型语言的变量类型要到程序运行的时候，待变量被赋予某个值之后，才会具有某种类型。

    - 优点：编写的代码数量更少，看起来也更加简洁，程序员可以把精力更多地 放在业务逻辑上面。虽然不区分类型在某些情况下会让程序变得难以理解，但整体而言，代码量 越少，越专注于逻辑表达，对阅读程序是越有帮助的。
    - 缺点：无法保证变量的类型，从而在程序的运行期有可能发生跟类型相关的错误。

ps：“面向接口编程”是设计模式中最重要的思想，在静态类型语言中，要实现“面向接口编程”并不是一件容易的事情，往往要通过抽象类或者接口等将对象进行向上转型。当对象的真正类型被隐藏在它的超类型身后，这些对象才能在类型检查系统的“监视”之下互相被替换使用。在动态类型语言的面向对象设计中，我们不必借助超类型的帮助，就能轻松地在动态类型语言中面向接口编程，而不是面向实现编程。

#### 封装

在许多语言的对象系统中，封装数据是由语法解析来实现的，这些语言也许提供了 private、public、protected 等关键字来提供不同的访问权限。但 JavaScript 并没有提供对这些关键字的支持，我们只能依赖变量的作用域来实现封装特性，而且只能模拟出 public 和 private 这两种封装性。

#### 继承

JavaScript 基于原型模式实现继承。

- 所有的数据都是对象；
- 要得到一个对象，不是通过实例化类，而是找到一个对象作为原型并克隆它；
- 对象会记住它的原型；
- 如果对象无法响应某个请求，它会把这个请求委托给它自己的原型；

#### 多态

多态的思想实际上是把“做什么”和“谁去做”分离开来，要实现 这一点，归根结底先要消除类型之间的耦合关系。如果类型之间的耦合关系没有被消除，那么我 们在 makeSound 方法中指定了发出叫声的对象是某个类型，它就不可能再被替换为另外一个类型。 在 Java 中，可以通过向上转型来实现多态。而 JavaScript 作为一门动态类型语言，它在编译时没有类型检查的过程，既没有检查创建的对象类型，又没有检查传递的参数类型，JavaScript 的变量类型在运行期是可变的，这意味着 JavaScript 对象的多态性是与生俱来的。

> 在 JavaScript 这种将函数作为一等对象的语言中，函数本身也是对象，函数用来封装行为并且能够被四处传递。当我们对一些函数发出“调用”的消息时，这些函数会返回不同的执行结果，这是“多态性”的一种体现，也是很多设计模式在 JavaScript 中可以用高阶函数来代替实现的原因。

