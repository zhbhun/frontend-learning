# CRDT

## 工作原理

CRDT 的工作原理是在数据结构的基础上增加版本号和操作类型。每个副本维护自己的状态和版本号，副本之间通过消息传递来进行状态同步。当一个副本对状态进行修改时，会生成一个包含版本号和操作类型的操作，将这个操作发送给其他副本，其他副本在接收到这个操作后根据版本号和操作类型来更新自己的状态。

CRDT 数据结构一般分为两类：有序集合和无序集合。有序集合比较常见的实现是 LWW-Element-Set 和 Observed-Remove Set。无序集合比较常见的实现是 G-Counter 和 PN-Counter。这些实现都使用了类似于 OT 算法的技术，通过操作的版本号和类型来解决冲突。

CRDT 数据结构的优点是实现简单、易于理解，并且可以保证最终一致性。缺点是由于增加了版本号和操作类型，所以存储空间可能会比较大。此外，对于有些操作，比如删除操作，CRDT 的实现比较复杂，需要使用特殊的技术来处理。
