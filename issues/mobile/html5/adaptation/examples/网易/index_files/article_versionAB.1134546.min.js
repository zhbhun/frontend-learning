"use strict";!function(e){var t=e.tools;t||(e.tools={publicMethod:{localParam:function(e,t){var r;return e=e||window.location.search,t=t||window.location.hash,r=function(e,t){var r;if(e)return r={},e.replace(t,function(e,t,o,n){r[t]=n}),r},{search:r(e,new RegExp("([^?=&]+)(=([^&]*))?","g"))||{},hash:r(t,new RegExp("([^#=&]+)(=([^&]*))?","g"))||{}}},cookie:{getItem:function(e){return decodeURIComponent(document.cookie.replace(new RegExp("(?:(?:^|.*;)\\s*"+encodeURIComponent(e).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=\\s*([^;]*).*$)|^.*$"),"$1"))||null},setItem:function(e,t,r,o,n,a){if(!e||/^(?:expires|max\-age|path|domain|secure)$/i.test(e))return!1;var c="";if(r)switch(r.constructor){case Number:c=r===1/0?"; expires=Fri, 31 Dec 9999 23:59:59 GMT":"; max-age="+r;break;case String:c="; expires="+r;break;case Date:c="; expires="+r.toUTCString()}return document.cookie=encodeURIComponent(e)+"="+encodeURIComponent(t)+c+(n?"; domain="+n:"")+(o?"; path="+o:"")+(a?"; secure":""),!0},removeItem:function(e,t,r){return!(!e||!this.hasItem(e))&&(document.cookie=encodeURIComponent(e)+"=; expires=Thu, 01 Jan 1970 00:00:00 GMT"+(r?"; domain="+r:"")+(t?"; path="+t:""),!0)},hasItem:function(e){return new RegExp("(?:^|;\\s*)"+encodeURIComponent(e).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=").test(document.cookie)},keys:function(){for(var e=document.cookie.replace(/((?:^|\s*;)[^\=]+)(?=;|$)|^\s*|\s*(?:\=[^;]*)?(?:\1|$)/g,"").split(/\s*(?:\=[^;]*)?;\s*/),t=0;t<e.length;t++)e[t]=decodeURIComponent(e[t]);return e}},isLocalStorageSupported:function(){var e="test",t=window.localStorage;try{t.setItem(e,"testValue")}catch(r){return console.log("localStorage.setItem\u4e0d\u53ef\u4ee5\u6267\u884c"),!1}try{return"testValue"==t.getItem(e)&&(t.removeItem(e),!0)}catch(r){return console.log("localStorage.getItem\u4e0d\u53ef\u4ee5\u6267\u884c"),!1}},isCookieSupported:function(){var t="test",r=e.tools.publicMethod.cookie;try{r.setItem(t,"testValue")}catch(o){return console.log("docCookies.setItem\u4e0d\u53ef\u4ee5\u6267\u884c"),!1}try{return"testValue"==r.getItem(t)&&(r.removeItem(t),!0)}catch(o){return console.log("docCookies.getItem\u4e0d\u53ef\u4ee5\u6267\u884c"),!1}},urlAddSearch:function(e,t,r){var o,n=!r||r,a=function(e){var t=document.createElement("a");return t.href=e,t},e=new a(e),c=e.href.match(/\?/)&&e.href.match(/\?$/)?"?":"",i=e.search;c||e.href.match(/\?/)||(c="?"),i+=c;for(var s in t)if(t[s]&&("string"==typeof t[s]||"number"==typeof t[s]))if(n){var l=this.localParam(i);if(l.search[s]){var u=new RegExp(s+"=([^&]*)","");i=i.replace(u,function(e,r){return s+"="+t[s]})}else i+="&"+s+"="+t[s]}else i+="&"+s+"="+t[s];return i=i.replace(/\?&/g,function(){return"?"}),o=e.origin+e.pathname+i+e.hash}}},t=e.tools);var r=(t.publicMethod.localParam().search,{A:"2-34",B:"35-67"}),o=function(e){if(t.publicMethod.isLocalStorageSupported()){var r=localStorage.getItem(e);if(r){var o=JSON.parse(r).flag;if(o&&o<=100&&o>=1)return o}}if(t.publicMethod.isCookieSupported()){var n=t.publicMethod.cookie.getItem(e);if(n){var o=JSON.parse(n).flag;if(o&&o<=100&&o>=1)return o}}return!1},n=function(e,r){var o=t.publicMethod.localParam().search,n=window.location.href;if("normal"!=e){if(o[r]){var a=new RegExp(r+"=([^&|^#]*)","");n=n.replace(a,function(t,o){return r+"="+e})}else{var c={};c[r]=e,n=t.publicMethod.urlAddSearch(n,c,1)}try{history.replaceState(null,"",n)}catch(i){console.warn("html5--history.pushState on error!")}}else{if(o[r]&&!o.debug){var a=new RegExp("&"+r+"=([^&]*)","");n=n.replace(a,function(e,t){return""})}try{history.replaceState(null,"",n)}catch(i){console.warn("html5--history.pushState on error!")}}},a=function(e,t){if(e&&t){for(var r in e)if(e[r]instanceof Array){for(var o=0;o<e[r].length;o++)if(e[r][o]==t)return r}else if("string"==typeof e[r]&&e[r].indexOf("-")){var n=e[r].split("-");if(2==n.length&&t>=n[0]&&t<=n[1])return r}return"normal"}return"normal"},c=o("NEWAP_ABVersion");if(c){var i=a(r,c);n(i,"articleversion")}}(window.NEWAP=window.NEWAP||{});
