# 计算器输入撤销、重做和删除

删除、撤销和重做功能是很多输入类程序都有的功能，在原有计算器基础上增加这撤销、重做和删除功能。

## 限制

- 你不可以使用 `eval()` 函数来执行计算
- 你不可以使用 `new Function('...')` 函数来执行计算

## 用例

1. 用户可以看到显示屏显示当前输入的数字或最后一次操作的结果。
2. 用户可以看到一个包含数字 0-9、操作符 —— '+'、'-'、'*'、'/'、'='、'↩'、'↪' 和 '🅧' 按钮的输入板，一个 'AC' 按钮（用于清除所有）。
3. 用户可以通过点击输入板上的数字来输入最多八位数的数字序列，任何超过8位的数字的输入都将被忽略。
4. 用户可以点击 'AC' 按钮来清除所有的内部工作区域，并将显示值设为 0。
5. 初始值为 0，输入操作符则以 0 为操作数，否则按收入的数字作为操作数；
6. 最后输入等号后，将计算结果作为下一轮计算的初始值；
7. 当前操作数为 0 时，再重复输入 0 时需要忽略，避免出现 00000123 这样的显示；
8. 暂时不支持数字正负符号输入，所有操作符号都以最后输入为准；

    例如：现在是 3 + ，再输入减号变为 3 -

9. 如果上一次输入的是操作符，现在输入等号支持自动去掉多余的操作符再进行计算。
10. 点击删除按钮 '🅧'，可以删除当前显示面板的最后一个字符；
11. 点击撤销按钮 '↩'，可以恢复到上一次输入的情况；

    - 1 + 2 x 3 =》撤销 =》 1 + 2 x
    - 1 + 2 x 3 + => 输入 - =》1 + 2 x 3 - => 撤销 =》 1 + 2 x 3 +
    - 1 + 2 x 3 =》删除 =》 1 + 2 x =》 撤销 =》1 + 2 x 3

12. 点击重做按钮 '↪'，与撤销按钮相反，可以恢复撤销的输入；

    1 + 2 x 3 =》撤销 =》 1 + 2 x =》重做 =》1 + 2 x 3

## 脚手架

https://codesandbox.io/s/calculator-4-c445xo


## 参考

- [Web 应用中的撤销与重做](https://zhuanlan.zhihu.com/p/43743782)
- [Web 应用的撤销重做实现](https://segmentfault.com/a/1190000020154153)
- [实现撤销重做](http://cn.redux.js.org/recipes/implementing-undo-history/)
- [【数据结构】撤销与重做 | 模型实现](https://blog.csdn.net/weixin_43095238/article/details/111475741)
- [Undo/Redo implementation [closed]](https://stackoverflow.com/questions/3541383/undo-redo-implementation)
